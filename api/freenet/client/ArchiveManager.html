<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_18) on Fri Mar 26 03:26:39 GMT 2010 -->
<TITLE>
ArchiveManager
</TITLE>

<META NAME="date" CONTENT="2010-03-26">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ArchiveManager";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../freenet/client/ArchiveKey.html" title="class in freenet.client"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../freenet/client/ArchiveManager.ARCHIVE_TYPE.html" title="enum in freenet.client"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?freenet/client/ArchiveManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ArchiveManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
freenet.client</FONT>
<BR>
Class ArchiveManager</H2>
<PRE>
<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>freenet.client.ArchiveManager</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>ArchiveManager</B><DT>extends <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></DL>
</PRE>

<P>
Cache of recently decoded archives:
 - Keep up to N ArchiveHandler's in RAM (this can be large; we don't keep the
 files open due to the limitations of the java.util.zip API)
 - Keep up to Y bytes (after padding and overheads) of decoded data on disk
 (the OS is quite capable of determining what to keep in actual RAM)

 Always take the lock on ArchiveStoreContext before the lock on ArchiveManager, NOT the other way around.
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../freenet/client/ArchiveManager.ARCHIVE_TYPE.html" title="enum in freenet.client">ArchiveManager.ARCHIVE_TYPE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../freenet/client/ArchiveManager.html#METADATA_NAME">METADATA_NAME</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../freenet/client/ArchiveManager.html#ArchiveManager(int, long, long, int, freenet.support.api.BucketFactory)">ArchiveManager</A></B>(int&nbsp;maxHandlers,
               long&nbsp;maxCachedData,
               long&nbsp;maxArchivedFileSize,
               int&nbsp;maxCachedElements,
               <A HREF="../../freenet/support/api/BucketFactory.html" title="interface in freenet.support.api">BucketFactory</A>&nbsp;tempBucketFactory)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create an ArchiveManager.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../freenet/client/ArchiveManager.html#extractToCache(freenet.keys.FreenetURI, freenet.client.ArchiveManager.ARCHIVE_TYPE, freenet.support.compress.Compressor.COMPRESSOR_TYPE, freenet.support.api.Bucket, freenet.client.ArchiveContext, freenet.client.ArchiveStoreContext, java.lang.String, freenet.client.ArchiveExtractCallback, com.db4o.ObjectContainer, freenet.client.async.ClientContext)">extractToCache</A></B>(<A HREF="../../freenet/keys/FreenetURI.html" title="class in freenet.keys">FreenetURI</A>&nbsp;key,
               <A HREF="../../freenet/client/ArchiveManager.ARCHIVE_TYPE.html" title="enum in freenet.client">ArchiveManager.ARCHIVE_TYPE</A>&nbsp;archiveType,
               <A HREF="../../freenet/support/compress/Compressor.COMPRESSOR_TYPE.html" title="enum in freenet.support.compress">Compressor.COMPRESSOR_TYPE</A>&nbsp;ctype,
               <A HREF="../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A>&nbsp;data,
               <A HREF="../../freenet/client/ArchiveContext.html" title="class in freenet.client">ArchiveContext</A>&nbsp;archiveContext,
               freenet.client.ArchiveStoreContext&nbsp;ctx,
               <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;element,
               <A HREF="../../freenet/client/ArchiveExtractCallback.html" title="interface in freenet.client">ArchiveExtractCallback</A>&nbsp;callback,
               com.db4o.ObjectContainer&nbsp;container,
               <A HREF="../../freenet/client/async/ClientContext.html" title="class in freenet.client.async">ClientContext</A>&nbsp;context)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extract data to cache.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../freenet/client/ArchiveManager.html#getCached(freenet.keys.FreenetURI, java.lang.String)">getCached</A></B>(<A HREF="../../freenet/keys/FreenetURI.html" title="class in freenet.keys">FreenetURI</A>&nbsp;key,
          <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;filename)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get a cached, previously extracted, file from an archive.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../freenet/client/ArchiveManager.html#init(com.db4o.ObjectContainer, freenet.client.async.ClientContext, long)">init</A></B>(com.db4o.ObjectContainer&nbsp;container,
     <A HREF="../../freenet/client/async/ClientContext.html" title="class in freenet.client.async">ClientContext</A>&nbsp;context,
     long&nbsp;nodeDBHandle)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../freenet/client/ArchiveHandler.html" title="interface in freenet.client">ArchiveHandler</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../freenet/client/ArchiveManager.html#makeHandler(freenet.keys.FreenetURI, freenet.client.ArchiveManager.ARCHIVE_TYPE, freenet.support.compress.Compressor.COMPRESSOR_TYPE, boolean, boolean)">makeHandler</A></B>(<A HREF="../../freenet/keys/FreenetURI.html" title="class in freenet.keys">FreenetURI</A>&nbsp;key,
            <A HREF="../../freenet/client/ArchiveManager.ARCHIVE_TYPE.html" title="enum in freenet.client">ArchiveManager.ARCHIVE_TYPE</A>&nbsp;archiveType,
            <A HREF="../../freenet/support/compress/Compressor.COMPRESSOR_TYPE.html" title="enum in freenet.support.compress">Compressor.COMPRESSOR_TYPE</A>&nbsp;ctype,
            boolean&nbsp;forceRefetch,
            boolean&nbsp;persistent)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create an archive handler.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../freenet/client/ArchiveManager.html#objectCanNew(com.db4o.ObjectContainer)">objectCanNew</A></B>(com.db4o.ObjectContainer&nbsp;container)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="METADATA_NAME"><!-- --></A><H3>
METADATA_NAME</H3>
<PRE>
public static final <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>METADATA_NAME</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#freenet.client.ArchiveManager.METADATA_NAME">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="ArchiveManager(int, long, long, int, freenet.support.api.BucketFactory)"><!-- --></A><H3>
ArchiveManager</H3>
<PRE>
public <B>ArchiveManager</B>(int&nbsp;maxHandlers,
                      long&nbsp;maxCachedData,
                      long&nbsp;maxArchivedFileSize,
                      int&nbsp;maxCachedElements,
                      <A HREF="../../freenet/support/api/BucketFactory.html" title="interface in freenet.support.api">BucketFactory</A>&nbsp;tempBucketFactory)</PRE>
<DL>
<DD>Create an ArchiveManager.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>maxHandlers</CODE> - The maximum number of cached ArchiveHandler's i.e. the
 maximum number of containers to track.<DD><CODE>maxCachedData</CODE> - The maximum size of the cache directory, in bytes.<DD><CODE>maxArchiveSize</CODE> - The maximum size of an archive.<DD><CODE>maxArchivedFileSize</CODE> - The maximum extracted size of a single file in any
 archive.<DD><CODE>maxCachedElements</CODE> - The maximum number of cached elements (an element is a
 file extracted from an archive. It is stored, encrypted and padded, in a single
 file.<DD><CODE>cacheDir</CODE> - The directory in which to store cached data.<DD><CODE>random</CODE> - A cryptographicaly secure random source<DD><CODE>weakRandom</CODE> - A weak and cheap random source</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="makeHandler(freenet.keys.FreenetURI, freenet.client.ArchiveManager.ARCHIVE_TYPE, freenet.support.compress.Compressor.COMPRESSOR_TYPE, boolean, boolean)"><!-- --></A><H3>
makeHandler</H3>
<PRE>
public <A HREF="../../freenet/client/ArchiveHandler.html" title="interface in freenet.client">ArchiveHandler</A> <B>makeHandler</B>(<A HREF="../../freenet/keys/FreenetURI.html" title="class in freenet.keys">FreenetURI</A>&nbsp;key,
                                  <A HREF="../../freenet/client/ArchiveManager.ARCHIVE_TYPE.html" title="enum in freenet.client">ArchiveManager.ARCHIVE_TYPE</A>&nbsp;archiveType,
                                  <A HREF="../../freenet/support/compress/Compressor.COMPRESSOR_TYPE.html" title="enum in freenet.support.compress">Compressor.COMPRESSOR_TYPE</A>&nbsp;ctype,
                                  boolean&nbsp;forceRefetch,
                                  boolean&nbsp;persistent)</PRE>
<DL>
<DD>Create an archive handler. This does not need to know how to
 fetch the key, because the methods called later will ask.
 It will try to serve from cache, but if that fails, will
 re-fetch.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - The key of the archive that we are extracting data from.<DD><CODE>archiveType</CODE> - The archive type, defined in Metadata.
<DT><B>Returns:</B><DD>An archive handler.</DL>
</DD>
</DL>
<HR>

<A NAME="getCached(freenet.keys.FreenetURI, java.lang.String)"><!-- --></A><H3>
getCached</H3>
<PRE>
public <A HREF="../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A> <B>getCached</B>(<A HREF="../../freenet/keys/FreenetURI.html" title="class in freenet.keys">FreenetURI</A>&nbsp;key,
                        <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;filename)
                 throws <A HREF="../../freenet/client/ArchiveFailureException.html" title="class in freenet.client">ArchiveFailureException</A></PRE>
<DL>
<DD>Get a cached, previously extracted, file from an archive.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - The key used to fetch the archive.<DD><CODE>filename</CODE> - The name of the file within the archive.
<DT><B>Returns:</B><DD>A Bucket containing the data requested, or null.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../freenet/client/ArchiveFailureException.html" title="class in freenet.client">ArchiveFailureException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="extractToCache(freenet.keys.FreenetURI, freenet.client.ArchiveManager.ARCHIVE_TYPE, freenet.support.compress.Compressor.COMPRESSOR_TYPE, freenet.support.api.Bucket, freenet.client.ArchiveContext, freenet.client.ArchiveStoreContext, java.lang.String, freenet.client.ArchiveExtractCallback, com.db4o.ObjectContainer, freenet.client.async.ClientContext)"><!-- --></A><H3>
extractToCache</H3>
<PRE>
public void <B>extractToCache</B>(<A HREF="../../freenet/keys/FreenetURI.html" title="class in freenet.keys">FreenetURI</A>&nbsp;key,
                           <A HREF="../../freenet/client/ArchiveManager.ARCHIVE_TYPE.html" title="enum in freenet.client">ArchiveManager.ARCHIVE_TYPE</A>&nbsp;archiveType,
                           <A HREF="../../freenet/support/compress/Compressor.COMPRESSOR_TYPE.html" title="enum in freenet.support.compress">Compressor.COMPRESSOR_TYPE</A>&nbsp;ctype,
                           <A HREF="../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A>&nbsp;data,
                           <A HREF="../../freenet/client/ArchiveContext.html" title="class in freenet.client">ArchiveContext</A>&nbsp;archiveContext,
                           freenet.client.ArchiveStoreContext&nbsp;ctx,
                           <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;element,
                           <A HREF="../../freenet/client/ArchiveExtractCallback.html" title="interface in freenet.client">ArchiveExtractCallback</A>&nbsp;callback,
                           com.db4o.ObjectContainer&nbsp;container,
                           <A HREF="../../freenet/client/async/ClientContext.html" title="class in freenet.client.async">ClientContext</A>&nbsp;context)
                    throws <A HREF="../../freenet/client/ArchiveFailureException.html" title="class in freenet.client">ArchiveFailureException</A>,
                           <A HREF="../../freenet/client/ArchiveRestartException.html" title="class in freenet.client">ArchiveRestartException</A></PRE>
<DL>
<DD>Extract data to cache. Call synchronized on ctx.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - The key the data was fetched from.<DD><CODE>archiveType</CODE> - The archive type. Must be Metadata.ARCHIVE_ZIP | Metadata.ARCHIVE_TAR.<DD><CODE>data</CODE> - The actual data fetched.<DD><CODE>archiveContext</CODE> - The context for the whole fetch process.<DD><CODE>ctx</CODE> - The ArchiveStoreContext for this key.<DD><CODE>element</CODE> - A particular element that the caller is especially interested in, or null.<DD><CODE>callback</CODE> - A callback to be called if we find that element, or if we don't.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../freenet/client/ArchiveFailureException.html" title="class in freenet.client">ArchiveFailureException</A></CODE> - If we could not extract the data, or it was too big, etc.
<DD><CODE><A HREF="../../freenet/client/ArchiveRestartException.html" title="class in freenet.client">ArchiveRestartException</A></CODE>
<DD><CODE><A HREF="../../freenet/client/ArchiveRestartException.html" title="class in freenet.client">ArchiveRestartException</A></CODE> - If the request needs to be restarted because the archive
 changed.

 FIXME: This method *can* be called from the database thread, however it isn't at
 present (check the call stack). Maybe we should get rid of the ObjectContainer?
 OTOH maybe extracting inline on the database thread for small containers would be useful?</DL>
</DD>
</DL>
<HR>

<A NAME="init(com.db4o.ObjectContainer, freenet.client.async.ClientContext, long)"><!-- --></A><H3>
init</H3>
<PRE>
public static void <B>init</B>(com.db4o.ObjectContainer&nbsp;container,
                        <A HREF="../../freenet/client/async/ClientContext.html" title="class in freenet.client.async">ClientContext</A>&nbsp;context,
                        long&nbsp;nodeDBHandle)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="objectCanNew(com.db4o.ObjectContainer)"><!-- --></A><H3>
objectCanNew</H3>
<PRE>
public boolean <B>objectCanNew</B>(com.db4o.ObjectContainer&nbsp;container)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../freenet/client/ArchiveKey.html" title="class in freenet.client"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../freenet/client/ArchiveManager.ARCHIVE_TYPE.html" title="enum in freenet.client"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?freenet/client/ArchiveManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ArchiveManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
