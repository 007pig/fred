<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_18) on Fri Mar 26 03:26:42 GMT 2010 -->
<TITLE>
DBJobRunner
</TITLE>

<META NAME="date" CONTENT="2010-03-26">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DBJobRunner";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../freenet/client/async/DBJob.html" title="interface in freenet.client.async"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../freenet/client/async/DefaultManifestPutter.html" title="class in freenet.client.async"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?freenet/client/async/DBJobRunner.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DBJobRunner.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
freenet.client.async</FONT>
<BR>
Interface DBJobRunner</H2>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../freenet/node/NodeClientCore.html" title="class in freenet.node">NodeClientCore</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>DBJobRunner</B></DL>
</PRE>

<P>
Interface for an object which queues and runs DBJob's. These are, apart from during startup,
 the only way to interact with the database.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>toad</DD>
</DL>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/client/async/DBJobRunner.html#getQueueSize(int)">getQueueSize</A></B>(int&nbsp;priority)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;How many jobs are queued at a given priority?</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/client/async/DBJobRunner.html#killedDatabase()">killedDatabase</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Has the database been killed?</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/client/async/DBJobRunner.html#onDatabaseThread()">onDatabaseThread</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Is the caller running on the database thread?</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/client/async/DBJobRunner.html#queue(freenet.client.async.DBJob, int, boolean)">queue</A></B>(<A HREF="../../../freenet/client/async/DBJob.html" title="interface in freenet.client.async">DBJob</A>&nbsp;job,
      int&nbsp;priority,
      boolean&nbsp;checkDupes)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Queue a database job.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/client/async/DBJobRunner.html#queueRestartJob(freenet.client.async.DBJob, int, com.db4o.ObjectContainer, boolean)">queueRestartJob</A></B>(<A HREF="../../../freenet/client/async/DBJob.html" title="interface in freenet.client.async">DBJob</A>&nbsp;job,
                int&nbsp;priority,
                com.db4o.ObjectContainer&nbsp;container,
                boolean&nbsp;early)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Queue a database job to be executed just after restart.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/client/async/DBJobRunner.html#removeRestartJob(freenet.client.async.DBJob, int, com.db4o.ObjectContainer)">removeRestartJob</A></B>(<A HREF="../../../freenet/client/async/DBJob.html" title="interface in freenet.client.async">DBJob</A>&nbsp;job,
                 int&nbsp;priority,
                 com.db4o.ObjectContainer&nbsp;container)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove a queued on-restart database job.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/client/async/DBJobRunner.html#runBlocking(freenet.client.async.DBJob, int)">runBlocking</A></B>(<A HREF="../../../freenet/client/async/DBJob.html" title="interface in freenet.client.async">DBJob</A>&nbsp;job,
            int&nbsp;priority)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Run this database job blocking.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/client/async/DBJobRunner.html#setCommitThisTransaction()">setCommitThisTransaction</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tell the job runner that this transaction needs to be committed, even if the
 DBJob returns false.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="queue(freenet.client.async.DBJob, int, boolean)"><!-- --></A><H3>
queue</H3>
<PRE>
void <B>queue</B>(<A HREF="../../../freenet/client/async/DBJob.html" title="interface in freenet.client.async">DBJob</A>&nbsp;job,
           int&nbsp;priority,
           boolean&nbsp;checkDupes)
           throws <A HREF="../../../freenet/client/async/DatabaseDisabledException.html" title="class in freenet.client.async">DatabaseDisabledException</A></PRE>
<DL>
<DD>Queue a database job. This will be run on the database thread, once it comes off the
 queue.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>job</CODE> - The job to run.<DD><CODE>priority</CODE> - The priority of the job. This uses NativeThread priorities, but only
 to determine which job to run first.<DD><CODE>checkDupes</CODE> - If true, check whether there is a job which is equals() to this job
 which is already queued to run, and if so don't queue the new job.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../freenet/client/async/DatabaseDisabledException.html" title="class in freenet.client.async">DatabaseDisabledException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="runBlocking(freenet.client.async.DBJob, int)"><!-- --></A><H3>
runBlocking</H3>
<PRE>
void <B>runBlocking</B>(<A HREF="../../../freenet/client/async/DBJob.html" title="interface in freenet.client.async">DBJob</A>&nbsp;job,
                 int&nbsp;priority)
                 throws <A HREF="../../../freenet/client/async/DatabaseDisabledException.html" title="class in freenet.client.async">DatabaseDisabledException</A></PRE>
<DL>
<DD>Run this database job blocking. If we are already on the database thread, 
 run it inline, otherwise schedule it at the specified priority and wait for 
 it to finish.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../freenet/client/async/DatabaseDisabledException.html" title="class in freenet.client.async">DatabaseDisabledException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="onDatabaseThread()"><!-- --></A><H3>
onDatabaseThread</H3>
<PRE>
boolean <B>onDatabaseThread</B>()</PRE>
<DL>
<DD>Is the caller running on the database thread?
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getQueueSize(int)"><!-- --></A><H3>
getQueueSize</H3>
<PRE>
int <B>getQueueSize</B>(int&nbsp;priority)</PRE>
<DL>
<DD>How many jobs are queued at a given priority?
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="queueRestartJob(freenet.client.async.DBJob, int, com.db4o.ObjectContainer, boolean)"><!-- --></A><H3>
queueRestartJob</H3>
<PRE>
void <B>queueRestartJob</B>(<A HREF="../../../freenet/client/async/DBJob.html" title="interface in freenet.client.async">DBJob</A>&nbsp;job,
                     int&nbsp;priority,
                     com.db4o.ObjectContainer&nbsp;container,
                     boolean&nbsp;early)
                     throws <A HREF="../../../freenet/client/async/DatabaseDisabledException.html" title="class in freenet.client.async">DatabaseDisabledException</A></PRE>
<DL>
<DD>Queue a database job to be executed just after restart.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>early</CODE> - If true, the job will be run just after startup, at HIGH priority; the priority
 given determines the order of such jobs. If false, it will be queued to the database job 
 scheduler at the given priority. Late jobs are responsible for removing themselves!
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../freenet/client/async/DatabaseDisabledException.html" title="class in freenet.client.async">DatabaseDisabledException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="removeRestartJob(freenet.client.async.DBJob, int, com.db4o.ObjectContainer)"><!-- --></A><H3>
removeRestartJob</H3>
<PRE>
void <B>removeRestartJob</B>(<A HREF="../../../freenet/client/async/DBJob.html" title="interface in freenet.client.async">DBJob</A>&nbsp;job,
                      int&nbsp;priority,
                      com.db4o.ObjectContainer&nbsp;container)
                      throws <A HREF="../../../freenet/client/async/DatabaseDisabledException.html" title="class in freenet.client.async">DatabaseDisabledException</A></PRE>
<DL>
<DD>Remove a queued on-restart database job.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../freenet/client/async/DatabaseDisabledException.html" title="class in freenet.client.async">DatabaseDisabledException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="killedDatabase()"><!-- --></A><H3>
killedDatabase</H3>
<PRE>
boolean <B>killedDatabase</B>()</PRE>
<DL>
<DD>Has the database been killed?
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setCommitThisTransaction()"><!-- --></A><H3>
setCommitThisTransaction</H3>
<PRE>
void <B>setCommitThisTransaction</B>()</PRE>
<DL>
<DD>Tell the job runner that this transaction needs to be committed, even if the
 DBJob returns false.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../freenet/client/async/DBJob.html" title="interface in freenet.client.async"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../freenet/client/async/DefaultManifestPutter.html" title="class in freenet.client.async"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?freenet/client/async/DBJobRunner.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DBJobRunner.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
