<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_18) on Fri Mar 26 03:26:52 GMT 2010 -->
<TITLE>
SegmentedBucketChainBucket
</TITLE>

<META NAME="date" CONTENT="2010-03-26">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="SegmentedBucketChainBucket";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../freenet/support/io/ReadOnlyFileSliceBucket.ReadOnlyFileSliceBucketException.html" title="class in freenet.support.io"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../freenet/support/io/SegmentedBucketChainBucketKillJob.html" title="class in freenet.support.io"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?freenet/support/io/SegmentedBucketChainBucket.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SegmentedBucketChainBucket.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
freenet.support.io</FONT>
<BR>
Class SegmentedBucketChainBucket</H2>
<PRE>
<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>freenet.support.io.SegmentedBucketChainBucket</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A>, <A HREF="../../../freenet/support/io/NotPersistentBucket.html" title="interface in freenet.support.io">NotPersistentBucket</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>SegmentedBucketChainBucket</B><DT>extends <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A><DT>implements <A HREF="../../../freenet/support/io/NotPersistentBucket.html" title="interface in freenet.support.io">NotPersistentBucket</A></DL>
</PRE>

<P>
Splits a large persistent file into a series of buckets, which are collected 
 into groups called segments to avoid huge transactions/memory usage.
 
 NON-PERSISTENT: This class uses persistent buckets, it stores them in the 
 database to save memory, but the bucket itself does not support persistence.
 Making it support persistence cleanly requires major refactoring. The obvious
 avenues are:
 
 1. Pass DBJobRunner in to getOutputStream(), getInputStream(), free(), 
 storeTo(). This will touch hundreds of files, mostly it is trivial though. It
 will however increase the overhead for all buckets slightly.
 2. Make DBJobRunner a static variable, hence there will be only one database
 thread for the whole VM, even in a simulation with more than one node. One
 difficulty with this is that the node.db4o needs to be in the correct directory,
 yet the database would need to be initiated very early on.
 
 Generally we create it, write to it, call getBuckets() and clear(), anyway ...
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Matthew Toseland <toad@amphibian.dyndns.org> (0xE43DA450)</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#bucketSize">bucketSize</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#segmentSize">segmentSize</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#SegmentedBucketChainBucket(int, freenet.support.api.BucketFactory, freenet.client.async.DBJobRunner, int)">SegmentedBucketChainBucket</A></B>(int&nbsp;blockSize,
                           <A HREF="../../../freenet/support/api/BucketFactory.html" title="interface in freenet.support.api">BucketFactory</A>&nbsp;factory,
                           <A HREF="../../../freenet/client/async/DBJobRunner.html" title="interface in freenet.client.async">DBJobRunner</A>&nbsp;runner,
                           int&nbsp;segmentSize2)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#clear()">clear</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#createShadow()">createShadow</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a shallow read-only copy of this bucket, using different 
 objects but using the same external storage.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#free()">free</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Free the bucket, if supported.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#getBuckets()">getBuckets</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#getBuckets(com.db4o.ObjectContainer)">getBuckets</A></B>(com.db4o.ObjectContainer&nbsp;container)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#getBuckets(freenet.support.io.SegmentedChainBucketSegment)">getBuckets</A></B>(<A HREF="../../../freenet/support/io/SegmentedChainBucketSegment.html" title="class in freenet.support.io">SegmentedChainBucketSegment</A>&nbsp;seg)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#getInputStream()">getInputStream</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns an InputStream that reads data from this Bucket.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#getName()">getName</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a name for the bucket, may be used to identify them in
 certain in certain situations.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#getOutputStream()">getOutputStream</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns an OutputStream that is used to put data in this Bucket, from the 
 beginning.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../freenet/support/io/SegmentedChainBucketSegment.html" title="class in freenet.support.io">SegmentedChainBucketSegment</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#getSegment(int)">getSegment</A></B>(int&nbsp;i)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#isReadOnly()">isReadOnly</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Is the bucket read-only?</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../freenet/support/io/SegmentedChainBucketSegment.html" title="class in freenet.support.io">SegmentedChainBucketSegment</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#makeSegment(int, freenet.support.io.SegmentedChainBucketSegment)">makeSegment</A></B>(int&nbsp;index,
            <A HREF="../../../freenet/support/io/SegmentedChainBucketSegment.html" title="class in freenet.support.io">SegmentedChainBucketSegment</A>&nbsp;oldSeg)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#removeFrom(com.db4o.ObjectContainer)">removeFrom</A></B>(com.db4o.ObjectContainer&nbsp;container)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove the bucket and everything under it from the database.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#setReadOnly()">setReadOnly</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Make the bucket read-only.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#size()">size</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the amount of data currently in this bucket in bytes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../freenet/support/io/SegmentedBucketChainBucket.html#storeTo(com.db4o.ObjectContainer)">storeTo</A></B>(com.db4o.ObjectContainer&nbsp;container)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Note that we don't recurse inside the segments, as it would produce a huge
 transaction.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="bucketSize"><!-- --></A><H3>
bucketSize</H3>
<PRE>
public final long <B>bucketSize</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="segmentSize"><!-- --></A><H3>
segmentSize</H3>
<PRE>
public final int <B>segmentSize</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="SegmentedBucketChainBucket(int, freenet.support.api.BucketFactory, freenet.client.async.DBJobRunner, int)"><!-- --></A><H3>
SegmentedBucketChainBucket</H3>
<PRE>
public <B>SegmentedBucketChainBucket</B>(int&nbsp;blockSize,
                                  <A HREF="../../../freenet/support/api/BucketFactory.html" title="interface in freenet.support.api">BucketFactory</A>&nbsp;factory,
                                  <A HREF="../../../freenet/client/async/DBJobRunner.html" title="interface in freenet.client.async">DBJobRunner</A>&nbsp;runner,
                                  int&nbsp;segmentSize2)</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="createShadow()"><!-- --></A><H3>
createShadow</H3>
<PRE>
public <A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A> <B>createShadow</B>()
                    throws <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../freenet/support/api/Bucket.html#createShadow()">Bucket</A></CODE></B></DD>
<DD>Create a shallow read-only copy of this bucket, using different 
 objects but using the same external storage. If this is not possible, 
 return null. Note that if the underlying bucket is deleted, the copy
 will become invalid and probably throw an IOException on read, or 
 possibly return too-short data etc. In some use cases e.g. on fproxy, 
 this is acceptable.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../freenet/support/api/Bucket.html#createShadow()">createShadow</A></CODE> in interface <CODE><A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="free()"><!-- --></A><H3>
free</H3>
<PRE>
public void <B>free</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../freenet/support/api/Bucket.html#free()">Bucket</A></CODE></B></DD>
<DD>Free the bucket, if supported.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../freenet/support/api/Bucket.html#free()">free</A></CODE> in interface <CODE><A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getInputStream()"><!-- --></A><H3>
getInputStream</H3>
<PRE>
public <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</A> <B>getInputStream</B>()
                           throws <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../freenet/support/api/Bucket.html#getInputStream()">Bucket</A></CODE></B></DD>
<DD>Returns an InputStream that reads data from this Bucket. If there is
 no data in this bucket, null is returned.
 
 You have to call Closer.close(inputStream) on the obtained stream to prevent resource leakage.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../freenet/support/api/Bucket.html#getInputStream()">getInputStream</A></CODE> in interface <CODE><A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getSegment(int)"><!-- --></A><H3>
getSegment</H3>
<PRE>
protected <A HREF="../../../freenet/support/io/SegmentedChainBucketSegment.html" title="class in freenet.support.io">SegmentedChainBucketSegment</A> <B>getSegment</B>(int&nbsp;i)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getBuckets(freenet.support.io.SegmentedChainBucketSegment)"><!-- --></A><H3>
getBuckets</H3>
<PRE>
protected <A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A>[] <B>getBuckets</B>(<A HREF="../../../freenet/support/io/SegmentedChainBucketSegment.html" title="class in freenet.support.io">SegmentedChainBucketSegment</A>&nbsp;seg)
                       throws <A HREF="../../../freenet/client/async/DatabaseDisabledException.html" title="class in freenet.client.async">DatabaseDisabledException</A></PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../freenet/client/async/DatabaseDisabledException.html" title="class in freenet.client.async">DatabaseDisabledException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getName()"><!-- --></A><H3>
getName</H3>
<PRE>
public <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>getName</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../freenet/support/api/Bucket.html#getName()">Bucket</A></CODE></B></DD>
<DD>Returns a name for the bucket, may be used to identify them in
 certain in certain situations.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../freenet/support/api/Bucket.html#getName()">getName</A></CODE> in interface <CODE><A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getOutputStream()"><!-- --></A><H3>
getOutputStream</H3>
<PRE>
public <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</A> <B>getOutputStream</B>()
                             throws <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../freenet/support/api/Bucket.html#getOutputStream()">Bucket</A></CODE></B></DD>
<DD>Returns an OutputStream that is used to put data in this Bucket, from the 
 beginning. It is not possible to append data to a Bucket! This simplifies the
 code significantly for some classes. If you need to append, just pass the 
 OutputStream around.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../freenet/support/api/Bucket.html#getOutputStream()">getOutputStream</A></CODE> in interface <CODE><A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="makeSegment(int, freenet.support.io.SegmentedChainBucketSegment)"><!-- --></A><H3>
makeSegment</H3>
<PRE>
protected <A HREF="../../../freenet/support/io/SegmentedChainBucketSegment.html" title="class in freenet.support.io">SegmentedChainBucketSegment</A> <B>makeSegment</B>(int&nbsp;index,
                                                  <A HREF="../../../freenet/support/io/SegmentedChainBucketSegment.html" title="class in freenet.support.io">SegmentedChainBucketSegment</A>&nbsp;oldSeg)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isReadOnly()"><!-- --></A><H3>
isReadOnly</H3>
<PRE>
public boolean <B>isReadOnly</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../freenet/support/api/Bucket.html#isReadOnly()">Bucket</A></CODE></B></DD>
<DD>Is the bucket read-only?
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../freenet/support/api/Bucket.html#isReadOnly()">isReadOnly</A></CODE> in interface <CODE><A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="removeFrom(com.db4o.ObjectContainer)"><!-- --></A><H3>
removeFrom</H3>
<PRE>
public void <B>removeFrom</B>(com.db4o.ObjectContainer&nbsp;container)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../freenet/support/api/Bucket.html#removeFrom(com.db4o.ObjectContainer)">Bucket</A></CODE></B></DD>
<DD>Remove the bucket and everything under it from the database.
 You don't need to call this if it hasn't been storeTo()'ed: buckets 
 that use the database internally will run a blocking job to delete 
 internal structure in free().
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../freenet/support/api/Bucket.html#removeFrom(com.db4o.ObjectContainer)">removeFrom</A></CODE> in interface <CODE><A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>container</CODE> - The database.</DL>
</DD>
</DL>
<HR>

<A NAME="setReadOnly()"><!-- --></A><H3>
setReadOnly</H3>
<PRE>
public void <B>setReadOnly</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../freenet/support/api/Bucket.html#setReadOnly()">Bucket</A></CODE></B></DD>
<DD>Make the bucket read-only. Irreversible.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../freenet/support/api/Bucket.html#setReadOnly()">setReadOnly</A></CODE> in interface <CODE><A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="size()"><!-- --></A><H3>
size</H3>
<PRE>
public long <B>size</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../freenet/support/api/Bucket.html#size()">Bucket</A></CODE></B></DD>
<DD>Returns the amount of data currently in this bucket in bytes.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../freenet/support/api/Bucket.html#size()">size</A></CODE> in interface <CODE><A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="storeTo(com.db4o.ObjectContainer)"><!-- --></A><H3>
storeTo</H3>
<PRE>
public void <B>storeTo</B>(com.db4o.ObjectContainer&nbsp;container)</PRE>
<DL>
<DD>Note that we don't recurse inside the segments, as it would produce a huge
 transaction. So you will need to close the OutputStream to commit the 
 progress of writing to a file. And yes, we can't append. So you need to
 write everything before storing the bucket.
 
 FIXME: Enforce the rule that you must close any OutputStream's before 
 calling storeTo().
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../freenet/support/api/Bucket.html#storeTo(com.db4o.ObjectContainer)">storeTo</A></CODE> in interface <CODE><A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getBuckets()"><!-- --></A><H3>
getBuckets</H3>
<PRE>
public <A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A>[] <B>getBuckets</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getBuckets(com.db4o.ObjectContainer)"><!-- --></A><H3>
getBuckets</H3>
<PRE>
protected <A HREF="../../../freenet/support/api/Bucket.html" title="interface in freenet.support.api">Bucket</A>[] <B>getBuckets</B>(com.db4o.ObjectContainer&nbsp;container)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="clear()"><!-- --></A><H3>
clear</H3>
<PRE>
public void <B>clear</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../freenet/support/io/ReadOnlyFileSliceBucket.ReadOnlyFileSliceBucketException.html" title="class in freenet.support.io"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../freenet/support/io/SegmentedBucketChainBucketKillJob.html" title="class in freenet.support.io"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?freenet/support/io/SegmentedBucketChainBucket.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SegmentedBucketChainBucket.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
