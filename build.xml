<?xml version="1.0"?>
<!-- ant build file for Freenet -->

<project name="Freenet" default="dist" basedir=".">
  <description>
     This file builds freenet...
     Possible targets: compile, dist (default), clean
  </description>

  <!-- set global properties for this build -->
  <property name="src" location="src"/>
  <property name="build" location="build"/>
 
    <!-- ================================================== -->
  <target name="compile">
    <!-- Create the time stamp -->
    <tstamp/>
    <!-- Create the build directory structure used by compile -->
    <mkdir dir="${build}"/>

    <javac srcdir="${src}" destdir="${build}" source="1.4" target="1.4" debug="on" optimize="on">
<!-- following a very temporary list of files to be build -->
      <include name="org/**.java"/>
      <include name="freenet/**/*.java"/>
      <include name="net/i2p/util/*.java"/>
      <exclude name="org/**/MersenneTwisterTest.java"/>
    </javac>
  </target>


    <!-- ================================================== -->
  <target name="dist" depends="compile"
      description="generate the distribution" >
    <!-- Create the distribution directory -->
    <!--<mkdir dir="."/>-->
    <!-- Put everything in ${build} into the freenet-${DSTAMP}.jar file -->
    <jar jarfile="freenet-${DSTAMP}.jar" basedir="${build}">
      <manifest>
         <attribute name="Main-Class" value="test/DatastoreTest"/>
         <attribute name="Built-By" value="${user.name}"/>
	 <section name="common">
	   <attribute name="Specification-Title" value="Example"/>
	   <attribute name="Specification-Version" value="0.7pre"/>
	   <attribute name="Specification-Vendor" value="freenetproject.org"/>
	   <attribute name="Implementation-Title" value="Freenet"/>
	   <attribute name="Implementation-Version" value="0.7pre ${TODAY}"/> 
	   <attribute name="Implementation-Vendor" value="Freenetproject.org"/>
	 </section>
       </manifest>
    </jar>    
  </target>

    <!-- ================================================== -->
    <target name="clean" description="Delete class files and docs dir.">
        <delete dir="${build}"/>
        <!--<delete><fileset dir="src" includes="**/*.class"/></delete>-->
    </target>

</project>
